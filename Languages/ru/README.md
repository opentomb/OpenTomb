[![Состояние сборки](https://travis-ci.org/opentomb/OpenTomb.svg?branch=master)](https://travis-ci.org/opentomb/OpenTomb)

OpenTomb — ресурс с открытым исходным кодом Tomb Raider 1-5 переделанный движок
-------------------------------------------------------

### Оглавление ###

- [Что это?](#what-is-this)
- [Зачем нужен новый движок?](#why-create-a-new-engine)
- [Особенности](#features)
- [Поддерживаемые платформы](#supported-platforms)
- [Установка](#setup)
- [Компиляция](#compiling)
- [Запуск и настройка](#running-and-configuration)
- [Лицензирование](#licensing)
- [Авторы](#credits)


### Что это? ###
OpenTomb - это переиздание классического движка с открытым исходным кодом Tomb Raider, предназначенное для игры на разных уровнях из всех классических игр Tomb Raider (1-5), а также пользовательские уровни TRLE. В проекте не используется оригинальный код Tomb Raider, поскольку все попытки получить исходные файлы из Eidos / Core были напрасны.

Вместо этого, разрабатывается все заново, полностью с нуля. Должно быть, что OpenTomb использует некоторые устаревшие подпрограммы из незавершенных проектов с открытым исходным кодом, такие как [OpenRaider](http://openraider.sourceforge.net/) и проект VT (см. [icculus.org](https://icculus.org/)), а также некоторый код от Quake Tenebrae.

OpenTomb пытается воссоздать оригинальный игровой опыт серии Tomb Raider, но только уже с современными обновлениями, функциями и дополнениями, способными в полной мере воспользоваться преимуществами нынешних современных ПК с мощными процессорами и графическими картами.

Информационные ссылки:
* Ссылка на TR форум: http://www.tombraiderforums.com/showthread.php?t=197508
* Discord канал: https://discord.gg/d8mQgdc

### Зачем нужен новый движок? ###
Это правда, что у нас есть полностью работающие сборки Windows из TR2-5, а TR1 работает отлично через [DosBox](https://www.dosbox.com/). Однако со временем
все прогрессирует и ситуация будет только ухудшаться, с более новыми операционными системами становится все менее вероятным поддерживать игры. OpenTomb всегда будет быть в состоянии перейти на любую платформу, которую вы хотите.

Верно и то, что для оригинального движка есть патчи.
улучшить и обновить его: TREP, TRNG и т. д. Преимущество OpenTomb заключается в том, что мы не ограничены оригинальным Binary, весомое ограничение, когда дело доходит до новых функций, графических улучшений, модификацию кода и многое другое. Открытый источник движка устраняет эти ограничения.

### Особенности ###
* OpenTomb имеет совершенно другой подход коллизии к оригинальному движку, обходя многие из существующих ограничений. Мы используем генератор рельефа для создания оптимизированной сетки столкновений для каждой комнаты из так называемой «флордаты».
* OpenTomb способен к переменной частоте кадров, не ограничиваясь 30fps, как
оригинальный движок.
* OpenTomb использует общие и гибкие библиотеки, такие как OpenGL, OpenAL, SDL и физику пули.
* OpenTomb реализует механизм сценариев Lua для определения всех функций сущности.
  Это означает, что, опять же, в отличие от оригинала, гораздо меньше жестко закодировано в самом движке, поэтому функциональность может быть расширена или изменена без модифицировании и перекомпилировании самого движка.
* Многие заброшенные и неиспользуемые функции от исходного движка были включены в OpenTomb. Новая анимация, неиспользуемые элементы, скрытые структуры, специфичные для PSX, внутри файлы уровня и многое другое!

### Поддерживаемые платформы ###
OpenTomb - кросс-платформенный движок: в настоящее время он может запускаться в Windows, Mac или Linux. Никаких мобильных реализаций пока нет, но они по сути возможны.

### Установка ###
Чтобы запустить любой из уровней из исходных игр, вам понадобятся активы из соответствующей игры. Эти ресурсы часто имеют тенденцию находится в загадочных форматах, вариаций в играх. Из-за этого вам нужно будет конвертировать некоторые игровые ресурсы к используемым форматам самостоятельно или получить их откуда-то в Сети.

Вот список всех необходимых активов и где их можно получить:

 * Папки данных из каждой игры. Получите их с компакт-дисков вашей приобретенной игры или Steam / GOG узлы. Просто возьмите папку с данными из папки каждой игры и поместите ее в соответствующей папке `/ data / tr * /`. Например, для TR3 путь будет `OpenTomb / данные / TR3 / данные /`

 * Аудиодорожки CD. OpenTomb поддерживает только OGG мгновенные аудиотреки, так что вы должны преобразовать оригинальные саундтреки самостоятельно или просто загрузить весь TR1-5 музыкальный пакет здесь: https://opentomb.earvillage.net ПОЖАЛУЙСТА, ОБРАТИТЕ ВНИМАНИЕ: файлы, возможно, потребуется переименовать, чтобы все работало, подробнее https://github.com/opentomb/OpenTomb/issues/447

 * Загрузка экранов для TR1-3 и TR5. Для TR3, извлечь их из директории pix
 вашей установленной официальной игры. Просто поместите этот каталог пиков в `/ data / tr3 /`папку. Что касается других игр, немного сложнее получить загрузочные экраны, так как там не было загрузочных экранов для версий ПК TR1-2, TR4 использовали скриншоты уровней как загрузочные экраны и TR5 использовали зашифрованный формат для хранения всей загрузки графики. Итак, чтобы облегчить вашу жизнь, вы можете просто загрузить загрузочный экран здесь: http://trep.trlevel.de/temp/loading_screens.zip
 Просто поместите это прямо в каталог OpenTomb, и это должно быть хитростью. Заметка: движок поддерживает png и pcx формат изображений на экране.

### Компиляция ###
Файл CMakeLists.txt имеет исходный код, поэтому вы можете компилировать OpenTomb с использованием CMake. В Windows вы также можете скомпилировать его из Code ID Blocks IDE (файл проекта также предоставляется). Кроме того, вы можете вручную скомпилировать его в Код::Блоки рекурсивного добавления всех исходных файлов из каталога / src и добавив эти библиотеки в настройки компоновщика в разделе «Параметры сборки проекта»:

* libmingw32.a
* libSDL2main.a
* libSDL2.dll.a
* liblua.a
* libpng.a
* libz.a
* libpthread.a

В Linux просто загрузите исходный код и запустите в терминале:

    cmake . && make

Необходимыми зависимостями являются заголовки разработки для SDL2, png, LUA 5.2, ZLIB. Вы можете установить их в дистрибутив на основе Ubuntu с помощью этой команды:

    sudo apt-get install libopenal-dev libsdl2-dev libpng12-dev liblua5.2-dev libglu1-mesa-dev zlib1g-dev

На Mac используйте проект XCode, который также доступен в исходном коде.

Примечание. Обратите внимание, что для OpenTomb требуется скомпилировать флаг C ++ 11 (`-std = c ++ 11`) должным образом! Вы можете использовать флаги оптимизации процессора (`-march = prescott`,`-march = i486`,` -march = core2`), а также общие флаги оптимизации (`-O1` и` -O2`),но НЕ ИСПОЛЬЗУЙТЕ флаг `-O3`, поскольку Bullet имеет тенденцию к сбою с этим уровнем оптимизации (GCC 5.1+ может скомпилировать его без ошибок).

### Запуск и настройка ###
Чтобы запустить OpenTomb, просто запустите исполняемый файл, сгенерированный сборкой. По умолчанию, нет параметров командной строки. Войдите в консоль, нажав кнопку \. Эта кнопка позволяет вводить команды для выбора уровней, изменения настроек и т. д. Введите «help», чтобы получить список команд. Введите «exit», чтобы выйти из движка.

В настоящее время все настройки в OpenTomb управляются через config.lua и
autoexec.lua. Config.lua содержит постоянные настройки движка и игры, в то время как autoexec.lua содержит любые команды, которые должны выполняться при запуске движка.

Config.lua разделен на различные разделы: экран, аудио, рендеринг, элементы управления, консоли и системы. В каждом из этих разделов вы можете изменить многочисленные параметры, имена которых обычно довольно интуитивно понятны.

Autoexec.lua - это простой список команд, запускаемых при запуске. Изменение
существующих команды могут привести к неправильной работе движка.

Чтобы выбрать уровень, введите 'setgamef (игра, уровень) в autoexec.lua или в
консоль, где игра 1-5. Уровни особняка обычно равны 0, а игры, в которых
нет особняка, начиная с уровня 1. Например, чтобы загрузить уровень 2 TR3,
вы должны ввести `setgamef (3, 2)`.

### Лицензирование ###
OpenTomb - это движок с открытым исходным кодом, распространяемый по лицензии LGPLv3, что означает что ЛЮБАЯ часть исходного кода также должна быть с открытым исходным кодом. Следовательно, все используемые библиотеки и связанные ресурсы должны быть открытыми с GPL-совместимыми лицензии. Ниже приведен список используемых библиотек и ресурсов и их лицензий.

* OpenGL — does not need licensing (https://www.opengl.org/about/#11)
* OpenAL Soft — LGPL
* SDL / SDL Image — zlib
* Bullet — zlib
* Freetype2 — GPL
* Lua — MIT
* ffmpeg rpl format and codecs (http://git.videolan.org/)

* Droid Sans Mono, Roboto Condensed Regular and Roboto Regular fonts — Apache

### Авторы ###
Примечание: Обратите внимание, что список авторов и участников постоянно расширяется, так как все больше людей участвует в разработке проектов, поэтому кто-то может быть отсутствует в этом списке!

* [TeslaRus](https://github.com/TeslaRus): главный разработчик.
* [Cochrane](https://github.com/Cochrane): рендеринг перезапись и оптимизация поддержки Mac OS X.
* [Gh0stBlade](https://github.com/Gh0stBlade): настройки рендеринга, порт шейдера, реализация игрового процесса, состояния контрольных исправления, программирование камеры и AI.
* [Lwmte](https://github.com/Lwmte): исправления состояния и сценариев, элементы управления, графический интерфейс и аудиомодули, триггер
и систему сущностей перепизаписывает.
* Nickotte: программирование интерфейса, реализация инвентаризации колец,
исправление камеры.
* [pmatulka](https://github.com/pmatulka): порт Linux и тестирование.
* [richardba](https://github.com/richardba): миграция Github, обслуживание рефинансирования Github, дизайн сайта.
* [Saracen](https://github.com/Saracen): освещение в комнате и статической сетке.
* [T4Larson](https://github.com/T4Larson): общие исправления стабильности и исправление ошибок.
* [vobject](https://github.com/vobject): ночные сборки, поддерживающие общую совместимость компилятора.
* [vvs-](https://github.com/vvs-): тестирование, отзывы, отчет об ошибках.
* [xproger](https://github.com/xproger): обновления документации.
* [Banderi](https://github.com/Banderi): документация, исправление ошибок.
* [gabrielmtzcarrillo](https://github.com/gabrielmtzcarrillo): работа шейдера объекта.
* [filfreire](https://github.com/filfreire): документация.


Дополнительные взносы: Ado Croft (обширное тестирование),
Попов Е. (порт шейдеров TRN каустики), [godmodder](https://github.com/godmodder) (общая помощь),
[jack9267](https://github.com/jack9267) (оптимизация загрузчика vt), meta2tr (тестирование и bugtracking),
shabtronic (исправления рендеринга), [Tonttu](https://github.com/Tonttu) (консольный патч) и
[xythobuz](https://github.com/xythobuz) (дополнительные патчи для совместимости с Mac).

Перевод: [Joey79100](https://github.com/Joey79100) (французский), Nickotte (итальянский), [Lwmte](https://github.com/Lwmte) (русский),
[SuiKaze Raider](https://twitter.com/suikazeraider) (испанский), [filfreire](https://github.com/filfreire) (португальский - Португалия).
